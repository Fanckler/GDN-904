'use strict';

class Attributes{
    constructor(form, generator){
        this.form = form;
        this.generator = generator;
    }

    render(attr){
        let str = '';
        let formSettings = this.form.vars;
        attr = attr || formSettings.attr;
        Object.keys(attr).forEach((attrname) => {
            if(attrname == '_keys'){
                return;
            }
            let attrvalue = attr[attrname];
            str += ' ';
            if(['placeholder', 'title'].indexOf(attrname) >= 0){
                str += `${attrname}="`;
                if(formSettings.translation_domain === false){
                    str += attrvalue;
                }
                else if(formSettings.translation_domain === null){
                    str += `{{ '${attrvalue}'|trans() }}`;
                }
                else {
                    str += `{{ '${attrvalue}'|trans({}, '${formSettings.translation_domain}') }}`;
                }
                str += '"';
            }
            else if(attrvalue === true){
                str += `${attrname}="${attrname}"`;
            }
            else if(attrvalue !== false){
                str += `${attrname}="${attrvalue}"`;
            }
        });
        return str;
    }
}

module.exports = Attributes;