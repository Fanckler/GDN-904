stages:
- release

release:
 image: node:8
 stage: release
 script:
 - git config --global user.email "runner@ci.com"
 - git config --global user.name "runner ci"
 - echo '${NPM_URL}/:_authToken="${NPM_TOKEN}"'>.npmrc
 - npm install -g semantic-release-gitlab
 - semantic-release-gitlab
 - export VERSION=$(git describe --tags)
 - npm version $VERSION
 - npm publish
 only:
 - master